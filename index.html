<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>OnlyJobs</title>
  <style>
    /* ...existing code... */
    body {
      margin: 0;
      font-family: 'Helvetica Neue', sans-serif;
      background: #fdfaf5;
      color: #333;
    }
    header {
      padding: 1rem;
      background: #fff;
      border-bottom: 1px solid #eee;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .logo {
      font-size: 1.4rem;
      font-weight: bold;
      letter-spacing: -0.5px;
    }
    .profile-icon {
      width: 32px;
      height: 32px;
      background: #ccc;
      border-radius: 50%;
      border: none;
      cursor: pointer;
    }
    .hero-box {
      background-color: #2f8732;
      color: white;
      padding: 2.5rem 1rem 2rem;
      text-align: center;
      border-radius: 20px;
      margin: 1rem;
    }
    .hero-box h1 {
      font-size: 2rem;
      margin-bottom: 0.5rem;
    }
    .hero-box p {
      font-size: 1rem;
      margin-bottom: 1.5rem;
    }
    .hero-box input {
      padding: 0.75rem 1.25rem;
      width: 80%;
      max-width: 400px;
      border: none;
      border-radius: 30px;
      font-size: 1rem;
      background-color: white;
      color: #2f8732;
    }
    .hero-box input::placeholder {
      color: #2f8732;
      opacity: 0.9;
    }
    .filters {
      display: flex;
      gap: 0.5rem;
      padding: 1rem;
      flex-wrap: wrap;
      justify-content: center;
    }
    .filter-btn {
      padding: 0.5rem 0.75rem;
      background: #2f8732;
      color: #fff;
      border: none;
      border-radius: 20px;
      font-size: 0.85rem;
      cursor: pointer;
    }
    .card-flip-container {
      perspective: 1200px;
      width: 100%;
      max-width: 400px;
      margin: 1rem auto;
    }
    .card-flip {
      width: 100%;
      height: 100%;
      transition: transform 0.6s cubic-bezier(.4,2,.6,1);
      transform-style: preserve-3d;
      position: relative;
    }
    .card-flip.flipped {
      transform: rotateY(180deg);
    }
    .card-front, .card-back {
      position: absolute;
      width: 100%;
      backface-visibility: hidden;
      border-radius: 16px;
      overflow: hidden;
      background: #fff;
      border: 2px solid #2f8732;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      min-height: 350px;
    }
    .card-front {
      z-index: 2;
    }
    .card-back {
      transform: rotateY(180deg);
      z-index: 3;
      display: flex;
      flex-direction: column;
      min-height: 350px;
      padding: 1.5rem 1rem;
      justify-content: center;
      align-items: center;
    }
    .card-back h3 {
      margin-top: 0;
    }
    .card-back p {
      margin: 1rem 0;
      color: #333;
    }
    .card-back button {
      margin-top: 1rem;
      background: #2f8732;
      color: #fff;
      border: none;
      border-radius: 8px;
      padding: 0.75rem 1.5rem;
      font-size: 1rem;
      cursor: pointer;
    }
    .card-back .back-btn {
      background: #ccc;
      color: #222;
      margin-top: 0.5rem;
    }
    .card-front img {
      width: 100%;
      height: 200px;
      object-fit: cover;
    }
    .card-content {
      padding: 1rem;
    }
    .job-title {
      font-size: 1.2rem;
      font-weight: bold;
    }
    .job-details {
      font-size: 0.9rem;
      color: #666;
      margin-top: 0.5rem;
    }
    .action-buttons {
      display: flex;
      justify-content: space-around;
      padding: 1rem;
    }
    .action-buttons button {
      background: #f5f5f5;
      border: none;
      padding: 0.75rem 1rem;
      border-radius: 8px;
      font-size: 1rem;
      cursor: pointer;
    }
    .action-buttons button:nth-child(2) {
      background-color: #2f8732;
      color: #fff;
    }
    .side-buttons {
      position: fixed;
      top: 1rem;
      right: 1rem;
      display: flex;
      flex-direction: row;
      gap: 0.5rem;
      z-index: 4001;
      pointer-events: auto;
    }
    .side-btn {
      background-color: #2f8732;
      color: white;
      border: none;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      font-size: 1.25rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      transition: background 0.2s;
    }
    .side-btn:hover {
      background-color: #256b27;
    }
    .post-type-filters {
      display: flex;
      gap: 0.5rem;
      padding: 0 1rem 1rem;
      justify-content: center;
      flex-wrap: wrap;
    }
    .post-type-btn {
      padding: 0.5rem 1rem;
      border: 1px solid #2f8732;
      border-radius: 20px;
      background: white;
      color: #2f8732;
      font-size: 0.85rem;
      cursor: pointer;
      transition: background 0.2s, color 0.2s;
    }
    .post-type-btn:hover,
    .post-type-btn.active {
      background: #2f8732;
      color: white;
    }
    .job-extra {
      display: none;
      padding: 1rem;
      font-size: 0.9rem;
      color: #444;
      background-color: #fdfdfb;
      border-top: 1px solid #eee;
      animation: fadeIn 0.3s ease;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .modal {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background-color: rgba(0, 0, 0, 0.4);
      justify-content: center;
      align-items: center;
      z-index: 1000;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease;
    }
    .modal.show {
      display: flex;
      opacity: 1;
      pointer-events: all;
    }
    .modal-content {
      background: white;
      border-radius: 12px;
      padding: 1.5rem;
      width: 90%;
      max-width: 400px;
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }
    .modal-content input,
    .modal-content textarea,
    .modal-content select {
      padding: 0.6rem;
      font-size: 0.95rem;
      border-radius: 8px;
      border: 1px solid #ccc;
      width: 100%;
    }
    .modal-content button {
      padding: 0.6rem;
      font-size: 1rem;
      border-radius: 8px;
      border: none;
      cursor: pointer;
    }
    #submit-post {
      background-color: #2f8732;
      color: white;
    }
    #close-post-modal {
      background-color: #ccc;
      color: black;
    }
    .welcome-modal {
      position: fixed;
      top: -100%;
      left: 0;
      width: 100vw;
      height: 100vh;
      background-color: rgba(0, 0, 0, 0.9);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 4000;
      transition: top 0.5s ease;
    }
    .welcome-modal.show {
      top: 0;
    }
    .welcome-content {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      align-items: center;
    }
    .welcome-btn {
      background-color: transparent;
      border: 2px solid #2f8732;
      color: #2f8732;
      padding: 0.75rem 1.5rem;
      font-size: 1rem;
      border-radius: 12px;
      cursor: pointer;
      width: 180px;
      transition: background 0.3s ease;
    }
    .welcome-btn:hover {
      background-color: #2f8732;
      color: white;
    }
    .close-btn {
      position: absolute;
      top: 1.5rem;
      right: 1.5rem;
      background: none;
      border: none;
      font-size: 1.5rem;
      color: #2f8732;
      cursor: pointer;
    }
    /* Profile page styles */
    .profile-header {
      background: #2f8732;
      color: #fff;
      padding: 2rem 1rem 1rem;
      text-align: center;
    }
    .profile-pic-preview {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid #fff;
      margin-bottom: 1rem;
      background: #eee;
    }
    .profile-form {
      max-width: 500px;
      margin: 2rem auto;
      background: #fff;
      border-radius: 16px;
      padding: 2rem;
      box-shadow: 0 2px 10px rgba(0,0,0,0.04);
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    .profile-form label {
      font-weight: bold;
      margin-bottom: 0.25rem;
    }
    .profile-form input,
    .profile-form textarea {
      width: 100%;
      padding: 0.7rem;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 1rem;
      margin-bottom: 1rem;
    }
    .profile-form button {
      padding: 0.7rem 1.5rem;
      border-radius: 8px;
      border: none;
      background: #2f8732;
      color: #fff;
      font-size: 1rem;
      cursor: pointer;
      margin-top: 1rem;
    }
    .profile-form .back-btn {
      background: #ccc;
      color: #222;
      margin-left: 1rem;
    }
    .profile-actions {
      display: flex;
      justify-content: flex-end;
      gap: 1rem;
    }
    .settings-section {
      margin-top: 2rem;
      padding-top: 1rem;
      border-top: 1px solid #eee;
    }
    .settings-section label {
      font-weight: normal;
      margin-right: 1rem;
    }
    /* Sidebar styles for profile */
    .profile-container {
      display: flex;
      max-width: 900px;
      margin: 2rem auto 0;
    }
    #profile-sidebar {
      width: 70px;
      min-width: 50px;
      background: #f3f3f3;
      border-radius: 16px 0 0 16px;
      padding: 2rem 0.5rem 1rem;
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
      align-items: center;
      box-shadow: 0 2px 10px rgba(0,0,0,0.03);
    }
    .sidebar-btn {
      width: 48px;
      height: 48px;
      background: #fff;
      border: none;
      border-radius: 50%;
      font-size: 1.5rem;
      color: #2f8732;
      text-align: center;
      cursor: pointer;
      transition: background 0.2s;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      padding: 0;
    }
    .sidebar-btn:hover {
      background: #e6f5e6;
    }
    @media (max-width: 700px) {
      .profile-container { flex-direction: column; }
      #profile-sidebar { display: none; }
      .profile-header, .profile-form { border-radius: 16px !important; }
    }
    /* Calendar Modal Styles */
    #calendar-modal {
      display: none;
      position: fixed;
      z-index: 5000;
      left: 0; top: 0; width: 100vw; height: 100vh;
      background: rgba(0,0,0,0.5);
      justify-content: center;
      align-items: center;
    }
    #calendar-modal.show {
      display: flex;
    }
    .calendar-content {
      background: #fff;
      border-radius: 16px;
      padding: 2rem 1.5rem;
      width: 95vw;
      max-width: 420px;
      box-shadow: 0 2px 16px rgba(0,0,0,0.15);
      position: relative;
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    .calendar-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
    }
    .calendar-header button {
      background: #2f8732;
      color: #fff;
      border: none;
      border-radius: 6px;
      padding: 0.3rem 0.8rem;
      font-size: 1.1rem;
      cursor: pointer;
    }
    .calendar-table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 1rem;
    }
    .calendar-table th, .calendar-table td {
      width: 14.28%;
      text-align: center;
      padding: 0.5rem 0;
      border-radius: 6px;
      cursor: pointer;
      font-size: 1rem;
    }
    .calendar-table th {
      color: #2f8732;
      font-weight: bold;
      background: #f3f3f3;
    }
    .calendar-table td.today {
      background: #e6f5e6;
      font-weight: bold;
      color: #2f8732;
    }
    .calendar-table td.has-event {
      background: #2f8732;
      color: #fff;
      font-weight: bold;
      position: relative;
    }
    .calendar-table td:hover {
      background: #e6f5e6;
    }
    .calendar-events {
      margin-bottom: 1rem;
    }
    .calendar-events h4 {
      margin: 0 0 0.5rem 0;
      font-size: 1.1rem;
      color: #2f8732;
    }
    .calendar-events ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    .calendar-events li {
      background: #f3f3f3;
      margin-bottom: 0.3rem;
      padding: 0.5rem 0.7rem;
      border-radius: 6px;
      font-size: 0.98rem;
      color: #333;
    }
    .calendar-close-btn {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background: none;
      border: none;
      font-size: 1.5rem;
      color: #2f8732;
      cursor: pointer;
    }
    .calendar-add-form {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      margin-top: 0.5rem;
      background: #f9f9f9;
      border-radius: 8px;
      padding: 0.7rem 0.7rem 0.5rem;
    }
    .calendar-add-form input, .calendar-add-form select {
      padding: 0.4rem 0.6rem;
      border-radius: 6px;
      border: 1px solid #ccc;
      font-size: 1rem;
    }
    .calendar-add-form button {
      background: #2f8732;
      color: #fff;
      border: none;
      border-radius: 6px;
      padding: 0.5rem 1rem;
      font-size: 1rem;
      cursor: pointer;
      margin-top: 0.3rem;
      align-self: flex-end;
    }
  </style>
</head>
<body>
  <header>
    <div class="logo">OnlyJobs</div>
    <button class="profile-icon" id="header-profile-btn" aria-label="Profile"></button>
  </header>
  <div class="side-buttons">
    <button class="side-btn" id="post-btn">➕</button>
    <button class="side-btn" id="profile-btn">👤</button>
  </div>
  <div class="hero-box">
    <h1>Swipe. Match. Hustle.</h1>
    <p>Find gigs, tasks, and local work — in seconds.</p>
    <input type="text" placeholder="Enter your location" />
  </div>
  <div class="filters">
    <button class="filter-btn">5 mi</button>
    <button class="filter-btn">25 mi</button>
    <button class="filter-btn">50+ mi</button>
    <button class="filter-btn">Virtual</button>
    <button class="filter-btn">Local</button>
  </div>
  <div class="post-type-filters">
    <button class="post-type-btn" data-type="available">I'm available</button>
    <button class="post-type-btn" data-type="looking">I'm looking for</button>
    <button class="post-type-btn" data-type="hiring">Hiring help</button>
  </div>

  <!-- Card Flip Container -->
  <div class="card-flip-container">
    <div class="card-flip" id="card-flip">
      <!-- Front Side -->
      <div class="card card-front" id="swipe-card" data-swipeable="true">
        <img id="job-img" src="https://via.placeholder.com/400x200" alt="Job Preview">
        <div class="card-content">
          <div class="job-title" id="job-title">Part-Time Dog Walker</div>
          <div class="job-details" id="job-details">Salt Lake City • $20/hr • Local</div>
        </div>
        <div class="job-extra" id="job-extra">
          Must love dogs! Flexible hours. Experience with pets preferred. Available weekends.
        </div>
        <div class="action-buttons">
          <button id="pass-btn">❌ Pass</button>
          <button id="match-btn">✅ Match</button>
        </div>
      </div>
      <!-- Back Side -->
      <div class="card card-back" id="card-back">
        <h3 id="job-title-back">Part-Time Dog Walker</h3>
        <p id="job-details-back">Salt Lake City • $20/hr • Local</p>
        <div id="job-extra-back">Must love dogs! Flexible hours. Experience with pets preferred. Available weekends.</div>
        <button id="apply-btn">Apply</button>
        <button class="back-btn" id="flip-back-btn">Back</button>
      </div>
    </div>
  </div>

  <div id="post-modal" class="modal">
    <div class="modal-content">
      <h2>Post</h2>
      <label for="post-image">Add Photo</label>
      <input type="file" id="post-image" accept="image/*" />
      <input type="text" id="post-title" placeholder="Title (e.g: developer, florist, nail artist, personal job)" />
      <textarea id="post-description" placeholder="Describe the job, task, offer"></textarea>
      <label for="post-type">Post Type</label>
      <select id="post-type">
        <option value="available">I'm Available</option>
        <option value="looking">I'm Looking For</option>
        <option value="hiring">Hiring Help</option>
      </select>
      <label for="price-type">Price Type</label>
      <select id="price-type">
        <option value="set">Set Price</option>
        <option value="hourly">Hourly</option>
        <option value="weekly">Weekly</option>
        <option value="one-time">One Time</option>
      </select>
      <input type="text" id="post-price" placeholder="Enter price (e.g. 20, 50/hr)" />
      <input type="text" id="post-location" placeholder="Location (or 'Virtual')" />
      <button id="submit-post">Submit</button>
      <button id="close-post-modal">Cancel</button>
    </div>
  </div>

  <div id="welcome-modal" class="welcome-modal">
    <div class="welcome-content">
      <button class="close-btn" id="close-welcome">✕</button>
      <button class="welcome-btn" id="login-btn">Log In</button>
      <button class="welcome-btn" id="signup-btn">Sign Up</button>
      <button class="welcome-btn" id="skip-btn">Skip</button>
    </div>
  </div>

  <!-- Profile Section (in-page, not a popup) -->
  <div class="profile-container" id="profile-container" style="display:none;">
    <!-- Sidebar (icons only, no text) -->
    <nav id="profile-sidebar">
      <button class="sidebar-btn" id="sidebar-settings" title="Settings">⚙️</button>
      <button class="sidebar-btn" id="sidebar-calendar" title="Calendar">📅</button>
      <button class="sidebar-btn" id="sidebar-notifications" title="Notifications">🔔</button>
      <button class="sidebar-btn" id="sidebar-messages" title="Messaging">💬</button>
      <button class="sidebar-btn" id="sidebar-likes" title="Likes">❤️</button>
    </nav>
    <div style="flex:1;">
      <div class="profile-header" id="profile-header" style="display:block;">
        <h1>Your Profile</h1>
        <img id="profile-pic-preview" class="profile-pic-preview" src="https://via.placeholder.com/100?text=Photo" alt="Profile Picture">
        <div>
          <input type="file" id="profile-pic" accept="image/*" style="margin-top:1rem;">
        </div>
      </div>
      <form class="profile-form" id="profile-form" style="display:flex;">
        <label for="profile-name">Name</label>
        <input type="text" id="profile-name" placeholder="Enter your name" />

        <label for="profile-bio">About Me</label>
        <textarea id="profile-bio" placeholder="Tell us about yourself..."></textarea>

        <label for="profile-experience">Resume / Experience</label>
        <textarea id="profile-experience" placeholder="Example: Freelance Designer – 3 years"></textarea>

        <label for="profile-resume">Upload PDF Resume</label>
        <input type="file" id="profile-resume" accept="application/pdf" />
        <div id="resume-link" style="margin-bottom:1rem;display:none;">
          <a id="resume-download" href="#" target="_blank">View Uploaded Resume</a>
        </div>

        <div class="settings-section">
          <h3>Settings</h3>
          <label>
            <input type="checkbox" id="email-notifications" />
            Email Notifications
          </label>
          <label>
            <input type="checkbox" id="show-profile-public" />
            Show Profile Publicly
          </label>
        </div>
        <div class="profile-actions">
          <button type="submit">Save</button>
          <button type="button" class="back-btn" id="profile-back-btn">Back</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Calendar Modal -->
  <div id="calendar-modal">
    <div class="calendar-content">
      <button class="calendar-close-btn" id="calendar-close-btn" title="Close">&times;</button>
      <div class="calendar-header">
        <button id="calendar-prev">&lt;</button>
        <span id="calendar-month-label"></span>
        <button id="calendar-next">&gt;</button>
      </div>
      <table class="calendar-table">
        <thead>
          <tr>
            <th>Su</th><th>Mo</th><th>Tu</th><th>We</th><th>Th</th><th>Fr</th><th>Sa</th>
          </tr>
        </thead>
        <tbody id="calendar-body"></tbody>
      </table>
      <div class="calendar-events" id="calendar-events"></div>
      <form class="calendar-add-form" id="calendar-add-form" style="display:none;">
        <input type="text" id="calendar-event-title" placeholder="Event title" required />
        <select id="calendar-event-type">
          <option value="meeting">Meeting</option>
          <option value="interview">Interview</option>
          <option value="other">Other</option>
        </select>
        <input type="time" id="calendar-event-time" required />
        <button type="submit">Add Event</button>
      </form>
    </div>
  </div>

  <script>
    window.addEventListener('DOMContentLoaded', () => {
      // Post modal logic
      const postBtn = document.getElementById('post-btn');
      const postModal = document.getElementById('post-modal');
      const closeModal = document.getElementById('close-post-modal');
      const submitPost = document.getElementById('submit-post');

      function openPostModal() {
        postModal.classList.add('show');
      }
      function closePostModal() {
        postModal.classList.remove('show');
      }

      postBtn.addEventListener('click', openPostModal);
      closeModal.addEventListener('click', closePostModal);

      submitPost.addEventListener('click', () => {
        const post = {
          image: document.getElementById('post-image').files[0],
          title: document.getElementById('post-title').value,
          description: document.getElementById('post-description').value,
          type: document.getElementById('post-type').value,
          priceType: document.getElementById('price-type').value,
          price: document.getElementById('post-price').value,
          location: document.getElementById('post-location').value
        };
        console.log("📝 New Post:", post);
        closePostModal();
      });

      // Card swipe and flip logic
      const cardFlip = document.getElementById("card-flip");
      const card = document.getElementById("swipe-card");
      const cardBack = document.getElementById("card-back");
      const jobImg = document.getElementById("job-img");
      const jobTitle = document.getElementById("job-title");
      const jobDetails = document.getElementById("job-details");
      const jobExtra = document.getElementById("job-extra");
      const jobTitleBack = document.getElementById("job-title-back");
      const jobDetailsBack = document.getElementById("job-details-back");
      const jobExtraBack = document.getElementById("job-extra-back");
      const passBtn = document.getElementById("pass-btn");
      const matchBtn = document.getElementById("match-btn");
      const applyBtn = document.getElementById("apply-btn");
      const flipBackBtn = document.getElementById("flip-back-btn");

      const jobs = [
        {
          title: "Part-Time Dog Walker",
          details: "Salt Lake City • $20/hr • Local",
          img: "https://via.placeholder.com/400x200?text=Dog+Walker",
          extra: "Must love dogs! Flexible hours. Experience with pets preferred. Available weekends."
        },
        {
          title: "Event Assistant",
          details: "Virtual • $18/hr • Weekend Work",
          img: "https://via.placeholder.com/400x200?text=Event+Assistant",
          extra: "Help with virtual events. Good communication skills required. Flexible schedule."
        },
        {
          title: "Yard Cleanup Crew",
          details: "West Valley • $22/hr • 1-day Gig",
          img: "https://via.placeholder.com/400x200?text=Yard+Cleanup",
          extra: "Outdoor work. Must be able to lift 30 lbs. One day only."
        }
      ];

      let jobIndex = 0;
      let startX = 0, startY = 0, currentX = 0, currentY = 0, isDragging = false;
      const swipeThreshold = 100;
      const swipeUpThreshold = 80;

      function setTransform(x, y) {
        card.style.transform = `translate(${x}px, ${y}px) rotate(${x * 0.05}deg)`;
      }

      function resetCard() {
        card.style.transition = 'transform 0.3s ease';
        setTransform(0, 0);
        setTimeout(() => { card.style.transition = ''; }, 300);
      }

      function loadJob(idx) {
        const job = jobs[idx];
        jobTitle.textContent = job.title;
        jobDetails.textContent = job.details;
        jobImg.src = job.img;
        jobExtra.textContent = job.extra;
        jobTitleBack.textContent = job.title;
        jobDetailsBack.textContent = job.details;
        jobExtraBack.textContent = job.extra;
        resetCard();
        cardFlip.classList.remove('flipped');
      }

      function loadNextJob() {
        jobIndex++;
        if (jobIndex >= jobs.length) {
          jobTitle.textContent = "No more jobs!";
          jobDetails.textContent = "Check back later!";
          jobImg.src = "https://via.placeholder.com/400x200?text=No+More+Jobs";
          jobExtra.textContent = "";
          jobTitleBack.textContent = "No more jobs!";
          jobDetailsBack.textContent = "Check back later!";
          jobExtraBack.textContent = "";
          cardFlip.classList.remove('flipped');
          return;
        }
        loadJob(jobIndex);
      }

      function handleSwipe(endX, endY) {
        if (endY < -swipeUpThreshold && Math.abs(endX) < swipeThreshold / 2) {
          card.style.transform = 'translateY(-100vh)';
          setTimeout(() => {
            alert('You applied to this job!');
            loadNextJob();
          }, 300);
        } else if (endX < -swipeThreshold) {
          card.style.transform = 'translateX(-100vw) rotate(-15deg)';
          setTimeout(loadNextJob, 300);
        } else if (endX > swipeThreshold) {
          card.style.transform = 'translateX(100vw) rotate(15deg)';
          setTimeout(loadNextJob, 300);
        } else {
          resetCard();
        }
      }

      matchBtn.addEventListener("click", () => {
        card.style.transform = 'translateX(100vw) rotate(15deg)';
        setTimeout(loadNextJob, 300);
      });

      passBtn.addEventListener("click", () => {
        card.style.transform = 'translateX(-100vw) rotate(-15deg)';
        setTimeout(loadNextJob, 300);
      });

      // Flip to back on click
      card.addEventListener("click", (e) => {
        if (Math.abs(currentX) > 10 || Math.abs(currentY) > 10) return;
        cardFlip.classList.add('flipped');
      });

      // Flip back to front
      flipBackBtn.addEventListener("click", () => {
        cardFlip.classList.remove('flipped');
      });

      // Apply button on back
      applyBtn.addEventListener("click", () => {
        alert('You applied to this job!');
        loadNextJob();
      });

      // Mouse events
      card.addEventListener("mousedown", (e) => {
        startX = e.clientX;
        startY = e.clientY;
        isDragging = true;
      });

      document.addEventListener("mousemove", (e) => {
        if (!isDragging) return;
        currentX = e.clientX - startX;
        currentY = e.clientY - startY;
        setTransform(currentX, currentY);
      });

      document.addEventListener("mouseup", () => {
        if (!isDragging) return;
        isDragging = false;
        handleSwipe(currentX, currentY);
        currentX = 0;
        currentY = 0;
      });

      // Touch events
      card.addEventListener("touchstart", (e) => {
        startX = e.touches[0].clientX;
        startY = e.touches[0].clientY;
        isDragging = true;
      });

      card.addEventListener("touchmove", (e) => {
        if (!isDragging) return;
        currentX = e.touches[0].clientX - startX;
        currentY = e.touches[0].clientY - startY;
        setTransform(currentX, currentY);
      });

      card.addEventListener("touchend", () => {
        isDragging = false;
        handleSwipe(currentX, currentY);
        currentX = 0;
        currentY = 0;
      });

      // Load first job
      loadJob(jobIndex);

      // Welcome modal logic
      const welcomeModal = document.getElementById('welcome-modal');
      const closeBtn = document.getElementById('close-welcome');
      const loginBtn = document.getElementById('login-btn');
      const signupBtn = document.getElementById('signup-btn');
      const skipBtn = document.getElementById('skip-btn');

      setTimeout(() => {
        welcomeModal.style.display = 'flex';
        requestAnimationFrame(() => {
          welcomeModal.classList.add('show');
        });
      }, 10000); // 10 seconds

      function closeWelcomeModal() {
        welcomeModal.classList.remove('show');
        setTimeout(() => {
          welcomeModal.style.display = 'none';
        }, 500); // Match your CSS transition duration
      }

      closeBtn.addEventListener('click', closeWelcomeModal);
      skipBtn.addEventListener('click', closeWelcomeModal);

      loginBtn.addEventListener('click', () => {
        alert('Login clicked');
        closeWelcomeModal();
      });

      signupBtn.addEventListener('click', () => {
        alert('Sign up clicked');
        closeWelcomeModal();
      });

      // Profile section logic (in-page)
      const profileBtn = document.getElementById('profile-btn');
      const profileContainer = document.getElementById('profile-container');
      const profileHeader = document.getElementById('profile-header');
      const profileForm = document.getElementById('profile-form');
      const profileBackBtn = document.getElementById('profile-back-btn');
      const mainSections = [
        document.querySelector('.hero-box'),
        document.querySelector('.filters'),
        document.querySelector('.post-type-filters'),
        document.querySelector('.card-flip-container'),
        document.getElementById('post-modal'),
        document.getElementById('welcome-modal')
      ];

      profileBtn.addEventListener('click', () => {
        // Hide main sections
        mainSections.forEach(sec => { if(sec) sec.style.display = 'none'; });
        profileContainer.style.display = 'flex';
        window.scrollTo(0,0);
      });

      profileBackBtn.addEventListener('click', () => {
        // Show main sections
        mainSections.forEach(sec => { if(sec) sec.style.display = ''; });
        profileContainer.style.display = 'none';
      });

      // Profile picture preview
      const profilePicInput = document.getElementById('profile-pic');
      const profilePicPreview = document.getElementById('profile-pic-preview');
      profilePicInput.addEventListener('change', function() {
        const file = this.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = function(e) {
            profilePicPreview.src = e.target.result;
          };
          reader.readAsDataURL(file);
        } else {
          profilePicPreview.src = "https://via.placeholder.com/100?text=Photo";
        }
      });

      // PDF Resume Upload/Preview
      const profileResumeInput = document.getElementById('profile-resume');
      const resumeLinkDiv = document.getElementById('resume-link');
      const resumeDownload = document.getElementById('resume-download');
      let resumeFileURL = null;

      profileResumeInput.addEventListener('change', function() {
        const file = this.files[0];
        if (file && file.type === "application/pdf") {
          if (resumeFileURL) URL.revokeObjectURL(resumeFileURL);
          resumeFileURL = URL.createObjectURL(file);
          resumeDownload.href = resumeFileURL;
          resumeDownload.textContent = "View Uploaded Resume";
          resumeLinkDiv.style.display = "block";
        } else {
          resumeLinkDiv.style.display = "none";
          if (resumeFileURL) URL.revokeObjectURL(resumeFileURL);
          resumeFileURL = null;
        }
      });

      // Calendar logic
      const calendarModal = document.getElementById('calendar-modal');
      const calendarCloseBtn = document.getElementById('calendar-close-btn');
      const calendarPrev = document.getElementById('calendar-prev');
      const calendarNext = document.getElementById('calendar-next');
      const calendarMonthLabel = document.getElementById('calendar-month-label');
      const calendarBody = document.getElementById('calendar-body');
      const calendarEventsDiv = document.getElementById('calendar-events');
      const calendarAddForm = document.getElementById('calendar-add-form');
      const calendarEventTitle = document.getElementById('calendar-event-title');
      const calendarEventType = document.getElementById('calendar-event-type');
      const calendarEventTime = document.getElementById('calendar-event-time');

      let calendarDate = new Date();
      let selectedDay = null;
      let calendarEvents = JSON.parse(localStorage.getItem('calendarEvents') || '{}');

      function pad(n) { return n < 10 ? '0'+n : n; }
      function dateKey(date) {
        return date.getFullYear() + '-' + pad(date.getMonth()+1) + '-' + pad(date.getDate());
      }

      function renderCalendar() {
        const year = calendarDate.getFullYear();
        const month = calendarDate.getMonth();
        const today = new Date();
        calendarMonthLabel.textContent = calendarDate.toLocaleString('default', { month: 'long', year: 'numeric' });

        // First day of month
        const firstDay = new Date(year, month, 1);
        const startDay = firstDay.getDay();
        // Days in month
        const daysInMonth = new Date(year, month+1, 0).getDate();

        let html = '';
        let day = 1;
        for (let i = 0; i < 6; i++) {
          html += '<tr>';
          for (let j = 0; j < 7; j++) {
            if ((i === 0 && j < startDay) || day > daysInMonth) {
              html += '<td></td>';
            } else {
              const thisDate = new Date(year, month, day);
              const key = dateKey(thisDate);
              let classes = [];
              if (
                today.getFullYear() === year &&
                today.getMonth() === month &&
                today.getDate() === day
              ) classes.push('today');
              if (calendarEvents[key] && calendarEvents[key].length) classes.push('has-event');
              html += `<td class="${classes.join(' ')}" data-date="${key}">${day}</td>`;
              day++;
            }
          }
          html += '</tr>';
          if (day > daysInMonth) break;
        }
        calendarBody.innerHTML = html;
      }

      function showEventsFor(dateStr) {
        selectedDay = dateStr;
        const events = calendarEvents[dateStr] || [];
        let html = `<h4>Events for ${dateStr}</h4>`;
        if (events.length === 0) {
          html += `<div>No events.</div>`;
        } else {
          html += '<ul>';
          for (const ev of events) {
            html += `<li><b>${ev.title}</b> (${ev.type}) at ${ev.time}</li>`;
          }
          html += '</ul>';
        }
        html += `<button id="calendar-add-event-btn" style="margin-top:0.5rem;">Add Event</button>`;
        calendarEventsDiv.innerHTML = html;
        calendarAddForm.style.display = 'none';

        // Add event button logic
        document.getElementById('calendar-add-event-btn').onclick = () => {
          calendarAddForm.style.display = 'flex';
          calendarEventTitle.value = '';
          calendarEventType.value = 'meeting';
          calendarEventTime.value = '';
        };
      }

      // Calendar navigation
      calendarPrev.onclick = () => {
        calendarDate.setMonth(calendarDate.getMonth() - 1);
        renderCalendar();
      };
      calendarNext.onclick = () => {
        calendarDate.setMonth(calendarDate.getMonth() + 1);
        renderCalendar();
      };

      // Click on day
      calendarBody.onclick = (e) => {
        if (e.target.tagName === 'TD' && e.target.dataset.date) {
          showEventsFor(e.target.dataset.date);
        }
      };

      // Add event form
      calendarAddForm.onsubmit = (e) => {
        e.preventDefault();
        if (!selectedDay) return;
        const ev = {
          title: calendarEventTitle.value,
          type: calendarEventType.value,
          time: calendarEventTime.value
        };
        if (!calendarEvents[selectedDay]) calendarEvents[selectedDay] = [];
        calendarEvents[selectedDay].push(ev);
        localStorage.setItem('calendarEvents', JSON.stringify(calendarEvents));
        showEventsFor(selectedDay);
        renderCalendar();
      };

      // Open/close modal
      document.getElementById('sidebar-calendar').onclick = () => {
        calendarModal.classList.add('show');
        renderCalendar();
        // Show today's events by default
        const todayKey = dateKey(new Date());
        showEventsFor(todayKey);
      };
      calendarCloseBtn.onclick = () => {
        calendarModal.classList.remove('show');
      };

      // Sidebar button demo actions
      document.getElementById('sidebar-settings').onclick = () => alert('Settings clicked!');
      document.getElementById('sidebar-notifications').onclick = () => alert('Notifications clicked!');
      document.getElementById('sidebar-messages').onclick = () => alert('Messaging clicked!');
      document.getElementById('sidebar-likes').onclick = () => alert('Likes clicked!');

      // Save profile (demo: just alert and prevent reload)
      document.getElementById('profile-form').addEventListener('submit', function(e) {
        e.preventDefault();
        const name = document.getElementById('profile-name').value.trim();
        const bio = document.getElementById('profile-bio').value.trim();
        const experience = document.getElementById('profile-experience').value.trim();
        const emailNotifications = document.getElementById('email-notifications').checked;
        const showProfilePublic = document.getElementById('show-profile-public').checked;
        const profilePic = profilePicPreview.src;
        alert('Profile saved!\n\n' +
          'Name: ' + name + '\n' +
          'About: ' + bio + '\n' +
          'Experience: ' + experience + '\n' +
          'Email Notifications: ' + (emailNotifications ? 'On' : 'Off') + '\n' +
          'Show Public: ' + (showProfilePublic ? 'Yes' : 'No')
        );
      });
    });
  </script>
</body>
</html>