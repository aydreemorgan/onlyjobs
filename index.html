<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>OnlyJobs</title>
  <style>
    body {
      margin: 0;
      font-family: 'Helvetica Neue', sans-serif;
      background: #fdfaf5;
      color: #333;
    }
    header {
      padding: 1rem;
      background: #fff;
      border-bottom: 1px solid #eee;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .logo {
      font-size: 1.4rem;
      font-weight: bold;
      letter-spacing: -0.5px;
    }
    .profile-icon {
      width: 32px;
      height: 32px;
      background: #ccc;
      border-radius: 50%;
    }
    .hero-box {
      background-color: #2f8732;
      color: white;
      padding: 2.5rem 1rem 2rem;
      text-align: center;
      border-radius: 20px;
      margin: 1rem;
    }
    .hero-box h1 {
      font-size: 2rem;
      margin-bottom: 0.5rem;
    }
    .hero-box p {
      font-size: 1rem;
      margin-bottom: 1.5rem;
    }
    .hero-box input {
      padding: 0.75rem 1.25rem;
      width: 80%;
      max-width: 400px;
      border: none;
      border-radius: 30px;
      font-size: 1rem;
      background-color: white;
      color: #2f8732;
    }
    .hero-box input::placeholder {
      color: #2f8732;
      opacity: 0.9;
    }
    .filters {
      display: flex;
      gap: 0.5rem;
      padding: 1rem;
      flex-wrap: wrap;
      justify-content: center;
    }
    .filter-btn {
      padding: 0.5rem 0.75rem;
      background: #2f8732;
      color: #fff;
      border: none;
      border-radius: 20px;
      font-size: 0.85rem;
      cursor: pointer;
    }
    .card-flip-container {
      perspective: 1200px;
      width: 100%;
      max-width: 400px;
      margin: 1rem auto;
    }
    .card-flip {
      width: 100%;
      height: 100%;
      transition: transform 0.6s cubic-bezier(.4,2,.6,1);
      transform-style: preserve-3d;
      position: relative;
    }
    .card-flip.flipped {
      transform: rotateY(180deg);
    }
    .card-front, .card-back {
      position: absolute;
      width: 100%;
      backface-visibility: hidden;
      border-radius: 16px;
      overflow: hidden;
      background: #fff;
      border: 2px solid #2f8732;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      min-height: 350px;
    }
    .card-front {
      z-index: 2;
    }
    .card-back {
      transform: rotateY(180deg);
      z-index: 3;
      display: flex;
      flex-direction: column;
      min-height: 350px;
      padding: 1.5rem 1rem;
      justify-content: center;
      align-items: center;
    }
    .card-back h3 {
      margin-top: 0;
    }
    .card-back p {
      margin: 1rem 0;
      color: #333;
    }
    .card-back button {
      margin-top: 1rem;
      background: #2f8732;
      color: #fff;
      border: none;
      border-radius: 8px;
      padding: 0.75rem 1.5rem;
      font-size: 1rem;
      cursor: pointer;
    }
    .card-back .back-btn {
      background: #ccc;
      color: #222;
      margin-top: 0.5rem;
    }
    .card-front img {
      width: 100%;
      height: 200px;
      object-fit: cover;
    }
    .card-content {
      padding: 1rem;
    }
    .job-title {
      font-size: 1.2rem;
      font-weight: bold;
    }
    .job-details {
      font-size: 0.9rem;
      color: #666;
      margin-top: 0.5rem;
    }
    .action-buttons {
      display: flex;
      justify-content: space-around;
      padding: 1rem;
    }
    .action-buttons button {
      background: #f5f5f5;
      border: none;
      padding: 0.75rem 1rem;
      border-radius: 8px;
      font-size: 1rem;
      cursor: pointer;
    }
    .action-buttons button:nth-child(2) {
      background-color: #2f8732;
      color: #fff;
    }
    .side-buttons {
      position: fixed;
      top: 1rem;
      right: 1rem;
      display: flex;
      flex-direction: row;
      gap: 0.5rem;
      z-index: 4001;
      pointer-events: auto;
    }
    .side-btn {
      background-color: #2f8732;
      color: white;
      border: none;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      font-size: 1.25rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      transition: background 0.2s;
    }
    .side-btn:hover {
      background-color: #256b27;
    }
    .post-type-filters {
      display: flex;
      gap: 0.5rem;
      padding: 0 1rem 1rem;
      justify-content: center;
      flex-wrap: wrap;
    }
    .post-type-btn {
      padding: 0.5rem 1rem;
      border: 1px solid #2f8732;
      border-radius: 20px;
      background: white;
      color: #2f8732;
      font-size: 0.85rem;
      cursor: pointer;
      transition: background 0.2s, color 0.2s;
    }
    .post-type-btn:hover,
    .post-type-btn.active {
      background: #2f8732;
      color: white;
    }
    .job-extra {
      display: none;
      padding: 1rem;
      font-size: 0.9rem;
      color: #444;
      background-color: #fdfdfb;
      border-top: 1px solid #eee;
      animation: fadeIn 0.3s ease;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .modal {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background-color: rgba(0, 0, 0, 0.4);
      justify-content: center;
      align-items: center;
      z-index: 1000;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease;
    }
    .modal.show {
      display: flex;
      opacity: 1;
      pointer-events: all;
    }
    .modal-content {
      background: white;
      border-radius: 12px;
      padding: 1.5rem;
      width: 90%;
      max-width: 400px;
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }
    .modal-content input,
    .modal-content textarea,
    .modal-content select {
      padding: 0.6rem;
      font-size: 0.95rem;
      border-radius: 8px;
      border: 1px solid #ccc;
      width: 100%;
    }
    .modal-content button {
      padding: 0.6rem;
      font-size: 1rem;
      border-radius: 8px;
      border: none;
      cursor: pointer;
    }
    #submit-post {
      background-color: #2f8732;
      color: white;
    }
    #close-post-modal {
      background-color: #ccc;
      color: black;
    }
    .profile-screen {
      position: fixed;
      top: 0; left: 0;
      width: 100vw;
      height: 100vh;
      background-color: #fff;
      z-index: 9999;
      padding: 2rem;
      box-sizing: border-box;
      overflow-y: auto;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease;
      display: none;
    }
    .profile-screen.show {
      opacity: 1;
      pointer-events: all;
      display: block;
    }
    .profile-card {
      max-width: 600px;
      margin: 0 auto;
      font-size: 1rem;
      color: #333;
      background: #f8f8f8;
      border-radius: 16px;
      padding: 2rem;
      box-shadow: 0 2px 10px rgba(0,0,0,0.04);
    }
    .profile-card label {
      font-weight: bold;
      margin-top: 1rem;
      display: block;
    }
    .profile-card input,
    .profile-card textarea {
      width: 100%;
      margin-top: 0.25rem;
      margin-bottom: 1rem;
      padding: 0.6rem;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 1rem;
    }
    .profile-actions {
      display: flex;
      gap: 1rem;
      justify-content: flex-end;
    }
    .profile-actions button {
      padding: 0.6rem 1.2rem;
      border-radius: 8px;
      border: none;
      font-size: 1rem;
      cursor: pointer;
    }
    #save-profile {
      background-color: #2f8732;
      color: white;
    }
    #close-profile {
      background-color: #ccc;
      color: black;
    }
    .welcome-modal {
      position: fixed;
      top: -100%;
      left: 0;
      width: 100vw;
      height: 100vh;
      background-color: rgba(0, 0, 0, 0.9);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 4000;
      transition: top 0.5s ease;
    }
    .welcome-modal.show {
      top: 0;
    }
    .welcome-content {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      align-items: center;
    }
    .welcome-btn {
      background-color: transparent;
      border: 2px solid #2f8732;
      color: #2f8732;
      padding: 0.75rem 1.5rem;
      font-size: 1rem;
      border-radius: 12px;
      cursor: pointer;
      width: 180px;
      transition: background 0.3s ease;
    }
    .welcome-btn:hover {
      background-color: #2f8732;
      color: white;
    }
    .close-btn {
      position: absolute;
      top: 1.5rem;
      right: 1.5rem;
      background: none;
      border: none;
      font-size: 1.5rem;
      color: #2f8732;
      cursor: pointer;
    }
    /* Profile picture preview style */
    .profile-pic-preview {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      object-fit: cover;
      border: 1px solid #ccc;
      margin-bottom: 1rem;
      display: block;
    }
    @keyframes popupFadeIn {
      from {
        transform: translateY(30px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="logo">OnlyJobs</div>
    <button id="header-profile-btn" class="profile-icon" aria-label="Profile"></button>
  </header>
  <div class="side-buttons">
    <button class="side-btn" id="post-btn">➕</button>
    <button class="side-btn" id="profile-btn">👤</button>
  </div>
  <div class="hero-box">
    <h1>Swipe. Match. Hustle.</h1>
    <p>Find gigs, tasks, and local work — in seconds.</p>
    <input type="text" placeholder="Enter your location" />
  </div>
  <div class="filters">
    <button class="filter-btn">5 mi</button>
    <button class="filter-btn">25 mi</button>
    <button class="filter-btn">50+ mi</button>
    <button class="filter-btn">Virtual</button>
    <button class="filter-btn">Local</button>
  </div>
  <div class="post-type-filters">
    <button class="post-type-btn" data-type="available">I'm available</button>
    <button class="post-type-btn" data-type="looking">I'm looking for</button>
    <button class="post-type-btn" data-type="hiring">Hiring help</button>
  </div>

  <!-- Card Flip Container -->
  <div class="card-flip-container">
    <div class="card-flip" id="card-flip">
      <!-- Front Side -->
      <div class="card card-front" id="swipe-card" data-swipeable="true">
        <img id="job-img" src="https://via.placeholder.com/400x200" alt="Job Preview">
        <div class="card-content">
          <div class="job-title" id="job-title">Part-Time Dog Walker</div>
          <div class="job-details" id="job-details">Salt Lake City • $20/hr • Local</div>
        </div>
        <div class="job-extra" id="job-extra">
          Must love dogs! Flexible hours. Experience with pets preferred. Available weekends.
        </div>
        <div class="action-buttons">
          <button id="pass-btn">❌ Pass</button>
          <button id="match-btn">✅ Match</button>
        </div>
      </div>
      <!-- Back Side -->
      <div class="card card-back" id="card-back">
        <h3 id="job-title-back">Part-Time Dog Walker</h3>
        <p id="job-details-back">Salt Lake City • $20/hr • Local</p>
        <div id="job-extra-back">Must love dogs! Flexible hours. Experience with pets preferred. Available weekends.</div>
        <button id="apply-btn">Apply</button>
        <button class="back-btn" id="flip-back-btn">Back</button>
      </div>
    </div>
  </div>

  <div id="post-modal" class="modal">
    <div class="modal-content">
      <h2>Post</h2>
      <label for="post-image">Add Photo</label>
      <input type="file" id="post-image" accept="image/*" />
      <input type="text" id="post-title" placeholder="Title (e.g: developer, florist, nail artist, personal job)" />
      <textarea id="post-description" placeholder="Describe the job, task, offer"></textarea>
      <label for="post-type">Post Type</label>
      <select id="post-type">
        <option value="available">I'm Available</option>
        <option value="looking">I'm Looking For</option>
        <option value="hiring">Hiring Help</option>
      </select>
      <label for="price-type">Price Type</label>
      <select id="price-type">
        <option value="set">Set Price</option>
        <option value="hourly">Hourly</option>
        <option value="weekly">Weekly</option>
        <option value="one-time">One Time</option>
      </select>
      <input type="text" id="post-price" placeholder="Enter price (e.g. 20, 50/hr)" />
      <input type="text" id="post-location" placeholder="Location (or 'Virtual')" />
      <button id="submit-post">Submit</button>
      <button id="close-post-modal">Cancel</button>
    </div>
  </div>

  <div id="profile-screen" class="profile-screen">
    <div class="profile-card">
      <h2>Edit Your Profile</h2>
      <label for="profile-pic">Profile Picture</label>
      <input type="file" id="profile-pic" accept="image/*" />
      <img id="profile-pic-preview" class="profile-pic-preview" src="https://via.placeholder.com/80?text=Photo" alt="Profile Preview">
      <label for="profile-name">Name</label>
      <input type="text" id="profile-name" placeholder="Enter your name" />
      <label for="profile-bio">Bio / About</label>
      <textarea id="profile-bio" placeholder="Tell us about yourself..."></textarea>
      <label for="profile-experience">Past Experience / Resume</label>
      <textarea id="profile-experience" placeholder="Example: Freelance Designer – 3 years"></textarea>
      <div class="profile-actions">
        <button id="save-profile">Save</button>
        <button id="close-profile">Close</button>
      </div>
    </div>
  </div>

  <div id="welcome-modal" class="welcome-modal">
    <div class="welcome-content">
      <button class="close-btn" id="close-welcome">✕</button>
      <button class="welcome-btn" id="login-btn">Log In</button>
      <button class="welcome-btn" id="signup-btn">Sign Up</button>
      <button class="welcome-btn" id="skip-btn">Skip</button>
    </div>
  </div>

  <script>
    window.addEventListener('DOMContentLoaded', () => {
      // Post modal logic
      const postBtn = document.getElementById('post-btn');
      const postModal = document.getElementById('post-modal');
      const closeModal = document.getElementById('close-post-modal');
      const submitPost = document.getElementById('submit-post');

      function openPostModal() {
        postModal.classList.add('show');
      }
      function closePostModal() {
        postModal.classList.remove('show');
      }

      postBtn.addEventListener('click', openPostModal);
      closeModal.addEventListener('click', closePostModal);

      submitPost.addEventListener('click', () => {
        const post = {
          image: document.getElementById('post-image').files[0],
          title: document.getElementById('post-title').value,
          description: document.getElementById('post-description').value,
          type: document.getElementById('post-type').value,
          priceType: document.getElementById('price-type').value,
          price: document.getElementById('post-price').value,
          location: document.getElementById('post-location').value
        };
        console.log("📝 New Post:", post);
        closePostModal();
      });

      // Card swipe and flip logic
      const cardFlip = document.getElementById("card-flip");
      const card = document.getElementById("swipe-card");
      const cardBack = document.getElementById("card-back");
      const jobImg = document.getElementById("job-img");
      const jobTitle = document.getElementById("job-title");
      const jobDetails = document.getElementById("job-details");
      const jobExtra = document.getElementById("job-extra");
      const jobTitleBack = document.getElementById("job-title-back");
      const jobDetailsBack = document.getElementById("job-details-back");
      const jobExtraBack = document.getElementById("job-extra-back");
      const passBtn = document.getElementById("pass-btn");
      const matchBtn = document.getElementById("match-btn");
      const applyBtn = document.getElementById("apply-btn");
      const flipBackBtn = document.getElementById("flip-back-btn");

      const jobs = [
        {
          title: "Part-Time Dog Walker",
          details: "Salt Lake City • $20/hr • Local",
          img: "https://via.placeholder.com/400x200?text=Dog+Walker",
          extra: "Must love dogs! Flexible hours. Experience with pets preferred. Available weekends."
        },
        {
          title: "Event Assistant",
          details: "Virtual • $18/hr • Weekend Work",
          img: "https://via.placeholder.com/400x200?text=Event+Assistant",
          extra: "Help with virtual events. Good communication skills required. Flexible schedule."
        },
        {
          title: "Yard Cleanup Crew",
          details: "West Valley • $22/hr • 1-day Gig",
          img: "https://via.placeholder.com/400x200?text=Yard+Cleanup",
          extra: "Outdoor work. Must be able to lift 30 lbs. One day only."
        }
      ];

      let jobIndex = 0;
      let startX = 0, startY = 0, currentX = 0, currentY = 0, isDragging = false;
      const swipeThreshold = 100;
      const swipeUpThreshold = 80;

      function setTransform(x, y) {
        card.style.transform = `translate(${x}px, ${y}px) rotate(${x * 0.05}deg)`;
      }

      function resetCard() {
        card.style.transition = 'transform 0.3s ease';
        setTransform(0, 0);
        setTimeout(() => { card.style.transition = ''; }, 300);
      }

      function loadJob(idx) {
        const job = jobs[idx];
        jobTitle.textContent = job.title;
        jobDetails.textContent = job.details;
        jobImg.src = job.img;
        jobExtra.textContent = job.extra;
        jobTitleBack.textContent = job.title;
        jobDetailsBack.textContent = job.details;
        jobExtraBack.textContent = job.extra;
        resetCard();
        cardFlip.classList.remove('flipped');
      }

      function loadNextJob() {
        jobIndex++;
        if (jobIndex >= jobs.length) {
          jobTitle.textContent = "No more jobs!";
          jobDetails.textContent = "Check back later!";
          jobImg.src = "https://via.placeholder.com/400x200?text=No+More+Jobs";
          jobExtra.textContent = "";
          jobTitleBack.textContent = "No more jobs!";
          jobDetailsBack.textContent = "Check back later!";
          jobExtraBack.textContent = "";
          cardFlip.classList.remove('flipped');
          return;
        }
        loadJob(jobIndex);
      }

      function handleSwipe(endX, endY) {
        if (endY < -swipeUpThreshold && Math.abs(endX) < swipeThreshold / 2) {
          card.style.transform = 'translateY(-100vh)';
          setTimeout(() => {
            alert('You applied to this job!');
            loadNextJob();
          }, 300);
        } else if (endX < -swipeThreshold) {
          card.style.transform = 'translateX(-100vw) rotate(-15deg)';
          setTimeout(loadNextJob, 300);
        } else if (endX > swipeThreshold) {
          card.style.transform = 'translateX(100vw) rotate(15deg)';
          setTimeout(loadNextJob, 300);
        } else {
          resetCard();
        }
      }

      matchBtn.addEventListener("click", () => {
        card.style.transform = 'translateX(100vw) rotate(15deg)';
        setTimeout(loadNextJob, 300);
      });

      passBtn.addEventListener("click", () => {
        card.style.transform = 'translateX(-100vw) rotate(-15deg)';
        setTimeout(loadNextJob, 300);
      });

      // Flip to back on click
      card.addEventListener("click", (e) => {
        if (Math.abs(currentX) > 10 || Math.abs(currentY) > 10) return;
        cardFlip.classList.add('flipped');
      });

      // Flip back to front
      flipBackBtn.addEventListener("click", () => {
        cardFlip.classList.remove('flipped');
      });

      // Apply button on back
      applyBtn.addEventListener("click", () => {
        alert('You applied to this job!');
        loadNextJob();
      });

      // Mouse events
      card.addEventListener("mousedown", (e) => {
        startX = e.clientX;
        startY = e.clientY;
        isDragging = true;
      });

      document.addEventListener("mousemove", (e) => {
        if (!isDragging) return;
        currentX = e.clientX - startX;
        currentY = e.clientY - startY;
        setTransform(currentX, currentY);
      });

      document.addEventListener("mouseup", () => {
        if (!isDragging) return;
        isDragging = false;
        handleSwipe(currentX, currentY);
        currentX = 0;
        currentY = 0;
      });

      // Touch events
      card.addEventListener("touchstart", (e) => {
        startX = e.touches[0].clientX;
        startY = e.touches[0].clientY;
        isDragging = true;
      });

      card.addEventListener("touchmove", (e) => {
        if (!isDragging) return;
        currentX = e.touches[0].clientX - startX;
        currentY = e.touches[0].clientY - startY;
        setTransform(currentX, currentY);
      });

      card.addEventListener("touchend", () => {
        isDragging = false;
        handleSwipe(currentX, currentY);
        currentX = 0;
        currentY = 0;
      });

      // Load first job
      loadJob(jobIndex);

      // Profile screen logic
      const profileBtn = document.getElementById('profile-btn');
      const headerProfileBtn = document.getElementById('header-profile-btn');
      const profileScreen = document.getElementById('profile-screen');
      const closeProfileBtn = document.getElementById('close-profile');
      const saveProfileBtn = document.getElementById('save-profile');
      const profilePicInput = document.getElementById('profile-pic');
      const profilePicPreview = document.getElementById('profile-pic-preview');

      // Show preview when user selects a profile picture
      profilePicInput.addEventListener('change', function() {
        const file = this.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = function(e) {
            profilePicPreview.src = e.target.result;
          };
          reader.readAsDataURL(file);
        } else {
          profilePicPreview.src = "https://via.placeholder.com/80?text=Photo";
        }
      });

      function openProfile() {
        profileScreen.style.display = 'block';
        requestAnimationFrame(() => {
          profileScreen.classList.add('show');
        });
      }
      function closeProfile() {
        profileScreen.classList.remove('show');
        setTimeout(() => {
          profileScreen.style.display = 'none';
        }, 300);
      }

      profileBtn.addEventListener('click', openProfile);
      headerProfileBtn.addEventListener('click', openProfile);
      closeProfileBtn.addEventListener('click', closeProfile);

      saveProfileBtn.addEventListener('click', () => {
        const name = document.getElementById('profile-name').value.trim();
        const bio = document.getElementById('profile-bio').value.trim();
        const experience = document.getElementById('profile-experience').value.trim();
        const profilePic = profilePicPreview.src;

        if (!name || !bio) {
          alert('Please complete at least your name and bio.');
          return;
        }

        console.log('✅ Saved Profile:', { name, bio, experience, profilePic });

        alert('Profile saved!');
        closeProfile();
      });

      // Welcome modal logic
      const welcomeModal = document.getElementById('welcome-modal');
      const closeBtn = document.getElementById('close-welcome');
      const loginBtn = document.getElementById('login-btn');
      const signupBtn = document.getElementById('signup-btn');
      const skipBtn = document.getElementById('skip-btn');

      setTimeout(() => {
        welcomeModal.style.display = 'flex';
        requestAnimationFrame(() => {
          welcomeModal.classList.add('show');
        });
      }, 10000); // 10 seconds

      function closeWelcomeModal() {
        welcomeModal.classList.remove('show');
        setTimeout(() => {
          welcomeModal.style.display = 'none';
        }, 500); // Match your CSS transition duration
      }

      closeBtn.addEventListener('click', closeWelcomeModal);
      skipBtn.addEventListener('click', closeWelcomeModal);

      loginBtn.addEventListener('click', () => {
        alert('Login clicked');
        closeWelcomeModal();
      });

      signupBtn.addEventListener('click', () => {
        alert('Sign up clicked');
        closeWelcomeModal();
      });
    });
  </script>
</body>
</html>